# 模拟
[题目链接](https://kamacoder.com/problempage.php?pid=1364)
## 思路分析
用一个变量记录当前遇到的左括号的数量，遇到右括号就减一，如果在遍历的过程中遇到这个变量降到负数了，则可以直接返回结果了，表示到这一位合法括号序列已经结束了。

如果到最后也没有遇到负数，那么说明字符串是合法的，但是最后这个变量的值表示多出来的左括号数，是不合法的序列。所以我们可以在遍历的过程中每次当这个变量每次到0的时候，就更新最大的长度，因为这个变量为0意味着，到目前为止还是一个合法的括号序列。
## 复杂度分析
1. 时间复杂度：O(n)；
2. 空间复杂度：O(1)。
## 代码实现
### Cpp
``` cpp
#include<bits/stdc++.h>
#define endl '\n'
const int N = 100005, MOD = 1000000007;
using namespace std;
using LL = long long;
using PIL = pair<int, LL>;
using PII = pair<int, int>;
using T3I = tuple<int, int, int>;
int t = 0, dir[]{1, 0, -1, 0, 1};
int main() {
    cin.tie(nullptr) -> sync_with_stdio(false);
    int n, st = 0, ans = 0;
    char s[N];
    cin >> n >> s;
    for (int i = 0; i < n; ++i) {
        if (s[i] == ')') {
            if (st-- > 0)  {
                if (st == 0) ans = max(ans, i + 1);
            }
            else {
                cout << i << endl;
                return 0;
            }
        } else ++st;
    }
    cout << ans << endl;
    return 0;
}
```
### Python
``` python
import sys

def main():
    n = int(sys.stdin.readline())
    s = sys.stdin.readline().strip()
    st, ans = 0, 0
    for i in range(n):
        if s[i] == ')':
            if st > 0:
                st -= 1
                if st == 0:
                    ans = max(ans, i + 1)
            else:
                print(i)
                return
        else:
            st += 1
    print(ans)

if __name__ == '__main__':
    main()
```
### Java
``` java
import java.io.*;
 
public class Main {
    public static void main(String[] args) throws IOException {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        int n = Integer.parseInt(br.readLine());
        String s = br.readLine();
        int st = 0, ans = 0;
        for (int i = 0; i < n; i++) {
            if (s.charAt(i) == ')') {
                if (st > 0) {
                    st--;
                    if (st == 0) ans = Math.max(ans, i + 1);
                } else {
                    System.out.println(i);
                    return;
                }
            } else {
                st++;
            }
        }
        System.out.println(ans);
    }
}
```
### Go
``` go
package main

import (
	"bufio"
	"fmt"
	"os"
	"strings"
)

func main() {
	reader := bufio.NewReader(os.Stdin)
	
	// 读取n
	var n int
	fmt.Fscan(reader, &n)
	
	// 读取字符串，正确处理换行符
	reader.ReadString('\n') // 消耗掉第一行的剩余部分（如果有）
	s, _ := reader.ReadString('\n')
	s = strings.TrimSpace(s) // 去除前后空白和换行符
	
	st := 0
	ans := 0
	for i := 0; i < n; i++ {
		if s[i] == ')' {
			if st > 0 {
				st--
				if st == 0 {
					if ans < i + 1 {
						ans = i + 1
					}
				}
			} else {
				// 与原C++代码一致，输出0-based位置
				fmt.Println(i)
				return
			}
		} else {
			st++
		}
	}
	fmt.Println(ans)
}
```