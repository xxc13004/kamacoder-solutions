# 模拟
[题目链接](https://kamacoder.com/problempage.php?pid=1355)
## 思路分析
由于能添加到数列中的数字一定是减小的，并且我们要求最终的数列一定是非递减的，所以我们如果要交换礼物的话，一定是从最后开始交换。

如果我们有一个很大的数字，我们将其交换到数列的某个中间的位置了，那么可能导致后面的数字小于这个中间的数字。理由如下：由于只能交换到更小的数字，此时我们再去交换后面的礼物，那么后面的礼物一定是小于当前位置的。那么数列永远不可能是非递减的了。

所以我们如果选择交换的话，一定是将后面的礼物慢慢的换到前面，而非先交换前面的。将后面的礼物一步一步换到前面来，才能使最终的数列是非递减的。

具体的做法就是，我们从后面往前面遍历整个数组，如果碰到多多手中的数字是大于当前的数字的话，那么就用多多的礼物交换当前的礼物，直到遇到前面已经存在的一个非递减的序列停止所有的交换。如果发现还没到已经存在的非递减的数列就已经出现无法交换的情况了，那么说明无法满足题意，直接输出-1即可。

注意：这里说的前面已经说的已经存在的非递减的数列是指——我们从头开始遍历数组，找到一个最长的非递减数列，记录这个数列最后一个元素的下标，作为上述操作的结束条件。

## 复杂度分析
1. 时间复杂度：O(n)；
2. 空间复杂度：O(1)。
## 代码实现
### Cpp
``` cpp
#include<bits/stdc++.h>
#define endl '\n'
const int N = 100005, MOD = 1000000007;
using namespace std;
using LL = long long;
using PIL = pair<int, LL>;
using PII = pair<int, int>;
using T3I = tuple<int, int, int>;
int t = 0, dir[]{1, 0, -1, 0, 1};
LL ans = 0;
int main() {
    cin.tie(nullptr) -> sync_with_stdio(false);
    int n, k;
    cin >> n >> k;
    vector<int> nums(n);
    for (int i = 0; i < n; ++i) cin >> nums[i];
    int index = 0;
    for (int i = 0, last = 0; i < n; last = nums[i++]) {
        if (nums[i] < last) {
            index = i;
            break;
        }
    }
    for (int i = n - 1; i >= index; --i) {
        if (k > nums[i]) {
            swap(nums[i], k);
            ++ans;
        }
    }
    for (int i = 0, last = 0; i < n; last = nums[i++]) {
        if (nums[i] < last) {
            cout << -1 << endl;
            return 0;
        }
    }
    cout << ans << endl;
    return 0;
}
```
### Python
``` python
import sys

def main():
    input = sys.stdin.read().split()
    ptr = 0
    n = int(input[ptr])
    ptr += 1
    k = int(input[ptr])
    ptr += 1
    
    nums = list(map(int, input[ptr:ptr+n]))
    ptr += n
    
    index = 0
    last = 0
    for i in range(n):
        if nums[i] < last:
            index = i
            break
        last = nums[i]
    
    ans = 0
    for i in range(n-1, index-1, -1):
        if k > nums[i]:
            nums[i], k = k, nums[i]
            ans += 1
    
    valid = True
    last = 0
    for num in nums:
        if num < last:
            valid = False
            break
        last = num
    
    print(ans if valid else -1)

if __name__ == "__main__":
    main()
```
### Java
``` java
import java.io.*;
import java.util.*;

public class Main {
    public static void main(String[] args) throws IOException {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(System.out));
        
        String[] firstLine = br.readLine().split(" ");
        int n = Integer.parseInt(firstLine[0]);
        int k = Integer.parseInt(firstLine[1]);
        
        int[] nums = new int[n];
        String[] numStrings = br.readLine().split(" ");
        for (int i = 0; i < n; i++) {
            nums[i] = Integer.parseInt(numStrings[i]);
        }
        
        int index = 0;
        for (int i = 0, last = 0; i < n; last = nums[i++]) {
            if (nums[i] < last) {
                index = i;
                break;
            }
        }
        
        long ans = 0;
        for (int i = n - 1; i >= index; i--) {
            if (k > nums[i]) {
                int temp = nums[i];
                nums[i] = k;
                k = temp;
                ans++;
            }
        }
        
        boolean valid = true;
        for (int i = 0, last = 0; i < n; last = nums[i++]) {
            if (nums[i] < last) {
                valid = false;
                break;
            }
        }
        
        bw.write(valid ? ans + "\n" : "-1\n");
        bw.flush();
    }
}
```
### Go
``` go
package main

import (
	"bufio"
	"fmt"
	"os"
)

func main() {
	const bufferSize = 1 << 20
	reader := bufio.NewReaderSize(os.Stdin, bufferSize)
	writer := bufio.NewWriterSize(os.Stdout, bufferSize)
	defer writer.Flush()

	readInt := func() int {
		var x int
		for {
			b, _ := reader.ReadByte()
			if b < '0' || b > '9' {
				if x == 0 {
					continue
				}
				return x
			}
			x = x*10 + int(b-'0')
		}
	}

	n := readInt()
	k := readInt()
	nums := make([]int, n)
	for i := 0; i < n; i++ {
		nums[i] = readInt()
	}

	index := 0
	for i, last := 0, 0; i < n; i++ {
		if nums[i] < last {
			index = i
			break
		}
		last = nums[i]
	}

	ans := 0
	for i := n - 1; i >= index; i-- {
		if k > nums[i] {
			nums[i], k = k, nums[i]
			ans++
		}
	}

	valid := true
	for i, last := 0, 0; i < n; i++ {
		if nums[i] < last {
			valid = false
			break
		}
		last = nums[i]
	}

	if valid {
		fmt.Fprintln(writer, ans)
	} else {
		fmt.Fprintln(writer, -1)
	}
}
```